<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool Browser</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-left">
            <button class="menu-button" id="menuButton">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="logo">Logo Here</div>
        </div>
        <div class="header-right">
            <div class="credit">Credit</div>
            <div class="profile" id="profileSection">
                <span id="userName">Guest</span>
                <div class="profile-icon">ðŸ‘¤</div>
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="dropdown-item" id="logoutBtn">Logout</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Tools</div>
                <div class="sidebar-item" data-category="health">
                    <div class="sidebar-icon"></div>
                    Health & Wellness
                </div>
                <div class="sidebar-item active" data-category="ai">
                    <div class="sidebar-icon"></div>
                    AI Assistance
                </div>
                <div class="sidebar-item" data-category="learning">
                    <div class="sidebar-icon"></div>
                    Learning & Engagement
                </div>
                <div class="sidebar-item" data-category="scheduling">
                    <div class="sidebar-icon"></div>
                    Scheduling & Reminders
                </div>
                <div class="sidebar-item" data-category="utilities">
                    <div class="sidebar-icon"></div>
                    Utilities
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="content-header">
                <h1 class="content-title" id="categoryTitle">AI Assistance</h1>
                <div class="search-container">
                    <div class="search-icon"></div>
                    <input type="text" class="search-input" placeholder="Search a tool" id="searchInput">
                </div>
            </div>

            <div class="tools-grid" id="toolsGrid">
                <!-- AI Assistance Tools -->
                <div class="tool-card" onclick="openTool('aichat/aichat.html')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">AI Chat Bot</h3>
                    <p class="tool-description">Get instant help and answers anytime using our smart assistant.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('aichat/aichat.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card" onclick="openTool('#')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Summarizer</h3>
                    <p class="tool-description">Instantly get summaries of long text or websites/links for easy reading.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <!-- Health & Wellness Tools -->
                <div class="tool-card health-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Health Tracker</h3>
                    <p class="tool-description">Monitor your daily health metrics and wellness goals.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card health-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Meditation Guide</h3>
                    <p class="tool-description">Guided meditation sessions for stress relief and mindfulness.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <!-- Learning & Engagement Tools -->
                <div class="tool-card learning-tool" style="display: none;" onclick="openTool('trivia/trivia.html')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Trivia Game</h3>
                    <p class="tool-description">Test your knowledge with fun trivia questions and challenges.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('trivia/trivia.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card learning-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Study Planner</h3>
                    <p class="tool-description">Organize your study schedule and track learning progress.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card learning-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Quiz Generator</h3>
                    <p class="tool-description">Create interactive quizzes to test your knowledge.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <!-- Scheduling & Reminders Tools -->
                <div class="tool-card scheduling-tool" style="display: none;" onclick="openTool('birthday-reminder/birthday.html')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Birthday Reminder</h3>
                    <p class="tool-description">Keep track of important birthdays and get timely reminders.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('birthday-reminder/birthday.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card scheduling-tool" style="display: none;" onclick="openTool('appointment/appointment.html')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Appointment Manager</h3>
                    <p class="tool-description">Schedule and manage your appointments efficiently.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('appointment/appointment.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card scheduling-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon chat">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Task Manager</h3>
                    <p class="tool-description">Organize and prioritize your daily tasks efficiently.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card scheduling-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Calendar Sync</h3>
                    <p class="tool-description">Sync and manage events across all your calendars.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <!-- Utilities Tools -->
                <div class="tool-card utilities-tool" onclick="openTool('weight-tracker/weight-tracker.html')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(102,126,234,0.2); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Weight Tracker</h3>
                    <p class="tool-description">Track your weight, calculate BMI, and view your progress over time.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('weight-tracker/weight-tracker.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card utilities-tool" style="display: none;" onclick="openTool('weather/weather.html')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Weather Tracker</h3>
                    <p class="tool-description">Get current weather information and forecasts.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('weather/weather.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card utilities-tool" style="display: none;" onclick="openTool('photogallery/photo.html')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Photo Gallery</h3>
                    <p class="tool-description">Upload and manage your photo collection.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('photogallery/photo.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card utilities-tool" style="display: none;" onclick="openTool('sos/main.html')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,0,0,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">SOS Emergency</h3>
                    <p class="tool-description">Emergency contact system for urgent situations.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('sos/main.html')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>

                <div class="tool-card utilities-tool" style="display: none;" onclick="openTool('#')">
                    <div class="tool-icon summarizer">
                        <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.3); border-radius: 4px;"></div>
                    </div>
                    <h3 class="tool-title">Password Generator</h3>
                    <p class="tool-description">Generate secure passwords for all your accounts.</p>
                    <button class="tool-button" onclick="event.stopPropagation(); openTool('#')">
                        Open Tool
                        <div class="button-icon"></div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tool navigation function
        function openTool(url) {
            if (url === '#') {
                alert('This tool is coming soon!');
                return;
            }
            window.location.href = url;
        }

        // Mobile menu toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const menuButton = document.getElementById('menuButton');
            
            if (sidebar && overlay && menuButton) {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                menuButton.classList.toggle('active');
            }
        }

        // Close sidebar
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const menuButton = document.getElementById('menuButton');
            
            if (sidebar && overlay && menuButton) {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                menuButton.classList.remove('active');
            }
        }

        // Category switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Authentication check
            const token = localStorage.getItem('authToken');
            const currentUser = localStorage.getItem('currentUser');
            
            if (!token) {
                // Redirect to login if not authenticated
                window.location.href = 'login/login.html';
                return;
            }
            
            // Display user info  
            if (currentUser) {
                try {
                    const user = JSON.parse(currentUser);
                    document.getElementById('userName').textContent = user.name || 'User';
                } catch (e) {
                    console.error('Error parsing user data:', e);
                }
            }

            // Setup menu button
            const menuButton = document.getElementById('menuButton');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            if (menuButton) {
                menuButton.addEventListener('click', toggleSidebar);
            }
            
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', closeSidebar);
            }

            // Setup logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async function() {
                    try {
                        const response = await fetch('http://localhost:3000/auth/logout', {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                                'Content-Type': 'application/json'
                            },
                            credentials: 'include'
                        });
                        
                        // Clear localStorage regardless of server response
                        localStorage.removeItem('authToken');
                        localStorage.removeItem('currentUser');
                        
                        // Redirect to login
                        window.location.href = 'login/login.html';
                    } catch (error) {
                        console.error('Logout error:', error);
                        // Still clear localStorage and redirect
                        localStorage.removeItem('authToken');
                        localStorage.removeItem('currentUser');
                        window.location.href = 'login/login.html';
                    }
                });
            }

            // Profile dropdown toggle
            const profileSection = document.querySelector('.profile');
            if (profileSection) {
                profileSection.addEventListener('click', function() {
                    document.getElementById('profileDropdown').classList.toggle('show');
                });
            }
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.profile')) {
                    document.getElementById('profileDropdown').classList.remove('show');
                }
            });

            // Category switching
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', () => {
                    const category = item.dataset.category;
                    
                    // Remove active class from all items
                    document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Hide all tools
                    document.querySelectorAll('.tool-card').forEach(card => {
                        card.style.display = 'none';
                    });
                    
                    // Show tools for selected category
                    document.querySelectorAll(`.${category}-tool`).forEach(card => {
                        card.style.display = 'block';
                    });
                    
                    // Update title
                    const categoryNames = {
                        health: 'Health & Wellness',
                        ai: 'AI Assistance', 
                        learning: 'Learning & Engagement',
                        scheduling: 'Scheduling & Reminders',
                        utilities: 'Utilities'
                    };
                    document.getElementById('categoryTitle').textContent = categoryNames[category];

                    // Close sidebar on mobile after selection
                    if (window.innerWidth <= 768) {
                        closeSidebar();
                    }
                });
            });
        });
    </script>
</body>
</html>